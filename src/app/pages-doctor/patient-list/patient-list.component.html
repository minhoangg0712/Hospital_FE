<div class="patient-list-container">
  <h2>DANH SÁCH BỆNH NHÂN</h2>

  <div *ngIf="isLoading" class="loading">
    <i class="fas fa-spinner fa-spin"></i>
    <p>Đang tải danh sách...</p>
  </div>

  <div *ngIf="errorMessage" class="error">
    <i class="fas fa-exclamation-circle"></i>
    <p>{{ errorMessage }}</p>
  </div>

  <div *ngIf="!isLoading && !errorMessage" class="content">
    <div class="search-box">
      <input 
        type="text" 
        [(ngModel)]="searchTerm" 
        placeholder="Tìm kiếm theo tên, CCCD hoặc số điện thoại..."
        class="search-input"
      >
    </div>

    <div class="patient-table">
      <table>
        <thead>
          <tr>
            <th>STT</th>
            <th>Họ tên</th>
            <th>CCCD</th>
            <th>Số điện thoại</th>
            <th>Email</th>
            <th>Giới tính</th>
            <th>Địa chỉ</th>
            <th>Số BHYT</th>
            <th>Thao tác</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let patient of filteredPatients; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ patient.name }}</td>
            <td>{{ patient.cccd }}</td>
            <td>{{ patient.phone }}</td>
            <td>{{ patient.email }}</td>
            <td>{{ patient.gender === 'MALE' ? 'Nam' : 'Nữ' }}</td>
            <td>{{ patient.address }}</td>
            <td>{{ patient.insuranceNumber }}</td>
            <td>
              <button 
                class="btn btn-primary" 
                (click)="viewPatientProfile(patient.userId)"
              >
                Xem chi tiết
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div> 